# --- Dependency Installation ---
print_header "ðŸ“¦ Installing Dependencies"

{% if create_log_dir %}
# Create log directory
mkdir -p /tmp/{{ project_name }}_setup
{% endif %}

echo -n "Syncing dependencies..."
{% if use_spinner %}
uv sync --all-groups > /tmp/{{ project_name }}_setup/sync.log 2>&1 &
SYNC_PID=$!
spinner $SYNC_PID
wait $SYNC_PID
SYNC_EXIT_CODE=$?
{% else %}
uv sync --all-groups
SYNC_EXIT_CODE=$?
{% endif %}

if [ $SYNC_EXIT_CODE -eq 0 ]; then
    print_success "Dependencies synced"
else
    print_error "Dependency sync failed"
    echo "Check /tmp/{{ project_name }}_setup/sync.log for details"
    return 1 2>/dev/null || exit 1
fi
